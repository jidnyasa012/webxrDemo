<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Matrix Rain in WebXR</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  </head>
  <body>
    <a-scene>
      <a-camera id="camera" position="0 1.6 0"></a-camera>

      <a-entity id="matrixRainEntity" visible="false" geometry="primitive: plane; width: 100; height: 100" material="color: green; opacity: 0.3" particle-system="preset: rain; size: 0.1; color: #00FF00">
      </a-entity>
    </a-scene>

    <script>
      document.querySelector("#camera").addEventListener("loaded", function () {
        var cameraEl = document.querySelector("#camera");
        var matrixRainEntity = document.querySelector("#matrixRainEntity");

        cameraEl.addEventListener("componentchanged", function (event) {
          if (event.detail.name === "position") {
            var cameraPosition = cameraEl.getAttribute("position");
            var cameraVisible = cameraEl.getAttribute("visible");

            // Check if the camera is visible and within a certain range
            if (cameraVisible && cameraPosition.y > 0 && cameraPosition.z < -4) {
              matrixRainEntity.setAttribute("visible", true);
            } else {
              matrixRainEntity.setAttribute("visible", false);
            }
          }
        });
      });
    </script>
  </body>
</html>
